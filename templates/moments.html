<!doctype html>
<html
  xmlns:th="https://www.thymeleaf.org"
  th:replace="~{modules/layout :: html(title = |#{page.moments.title} - ${site.title}|, hero = null, content = ~{::content}, head = null, footer = null, sidebar = null, contentClass = '')}"
>
  <th:block th:fragment="content">
    <th:block th:replace="~{modules/header}" />
    <div class="mt-16 bg-gray-400/5 px-4 py-12 sm:px-6 sm:py-16 lg:px-8 dark:bg-white/5">
      <div class="mx-auto max-w-3xl">
        <div class="flex flex-col items-center justify-center space-y-4">
          <div class="inline-flex h-12 w-12 items-center justify-center rounded-2xl bg-gray-500 shadow-lg sm:h-16 sm:w-16">
            <img class="h-full w-full rounded-xl bg-cover md:rounded-2xl" alt="moments" th:src="@{/assets/images/moments.svg}" />
          </div>
          <h1 class="text-2xl font-bold text-gray-900/70 sm:text-3xl dark:text-white/70" th:text="#{page.moments.title}"></h1>
          <p class="text-center text-sm leading-relaxed text-gray-600 sm:text-base dark:text-gray-300" th:text="#{page.moments.subtitle}"></p>
        </div>
      </div>
    </div>
    <section class="mx-auto max-w-4xl px-2 py-8 md:px-4">
      <div class="scrollbar-hidden mb-6 flex items-center gap-2 overflow-x-auto rounded-2xl md:flex-wrap">
        <button
          th:classappend="${#lists.isEmpty(param.tag) ? '!bg-white !text-gray-900 dark:!bg-slate-700/70 dark:!text-slate-100' : ''}"
          class="shrink-0 rounded-xl border border-transparent bg-gray-50/80 p-2 px-6 py-2 text-sm transition-colors dark:bg-white/5"
        >
          <a th:href="@{/moments}" th:text="#{common.all}"></a>
        </button>
        <button
          th:each="tag : ${tags}"
          th:classappend="${#lists.contains(param.tag, tag.name) ? '!bg-white !text-gray-900 dark:!bg-slate-700/70 dark:!text-slate-100' : ''}"
          class="shrink-0 rounded-xl border border-transparent bg-gray-50/80 p-2 px-6 py-2 text-sm transition-colors dark:bg-white/5"
        >
          <a th:href="@{|?tag=${tag.name}|}">
            <span th:text="|#${tag.name}|"></span>
            <sup th:text="${tag.momentCount}"></sup>
          </a>
        </button>
      </div>
      <!--  moment content    -->
      <ul class="space-y-6">
        <th:block th:each="moment : ${moments.items}">
          <th:block th:replace="~{modules/moment-list :: momentCard(${moment})}" />
        </th:block>
      </ul>
      <nav th:if="${moments.nextUrl}" class="mt-8 flex items-center justify-center gap-6">
        <a
          th:href="${moments.hasPrevious() ? moments.prevUrl : 'javascript:void(0)'}"
          th:classappend="${!moments.hasPrevious() ? 'opacity-50 cursor-not-allowed' : ''}"
          class="inline-flex items-center justify-center rounded-xl bg-white px-6 py-3 text-sm font-medium text-gray-900 shadow-sm transition-all dark:bg-white/10 dark:text-white/70"
        >
          <i class="fas fa-chevron-left mr-2"></i>
          <span th:text="#{common.previous}"></span>
        </a>
        <div class="inline-flex items-center gap-1 rounded-xl bg-white px-4 py-3 shadow-sm dark:bg-white/10">
          <span class="text-sm font-bold text-gray-900 dark:text-white" th:text="${moments.page}"></span>
          <span class="text-xs text-gray-400 dark:text-gray-500">/</span>
          <span class="text-sm text-gray-500 dark:text-gray-400" th:text="${moments.totalPages}"></span>
        </div>
        <a
          th:href="${moments.hasNext() ? moments.nextUrl : 'javascript:void(0)'}"
          th:classappend="${!moments.hasNext() ? 'opacity-50 cursor-not-allowed' : ''}"
          class="inline-flex items-center justify-center rounded-xl bg-white px-6 py-3 text-sm font-medium text-gray-900 shadow-sm transition-all dark:bg-white/10 dark:text-white/70"
        >
          <span th:text="#{common.next}"></span>
          <i class="fas fa-chevron-right ml-2"></i>
        </a>
      </nav>
    </section>
    <th:block th:replace="~{modules/shareModal}" />
    <th:block th:replace="~{modules/footer}" />
    <script>
      document.addEventListener('DOMContentLoaded', function() {
        const momentUpvote = new Upvote("halo.upvoted.moment.names", "moments", undefined, {}, "moment.halo.run", {
          headerBtnAttr: '[data-moment-name="{name}"]',
          header: '[data-moment-upvote="{name}"]',
        });
        momentUpvote.init();
        setTimeout(() => shareModalInstance(), 100);
      });
    </script>
  </th:block>
</html>
